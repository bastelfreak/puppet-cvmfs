# Reference

<!-- DO NOT EDIT: This document was generated by Puppet Strings -->

## Table of Contents

### Classes

#### Public Classes

* [`cvmfs`](#cvmfs): Installs and Configures CvmFS
* [`cvmfs::fsck`](#cvmfsfsck): enable check_fsck as a cron or systemd timer
* [`cvmfs::one::config`](#cvmfsoneconfig): Class: cvmfs::one::config Included once from the cvmfs::one defined type.
* [`cvmfs::one::install`](#cvmfsoneinstall): Class: cvmfs::one::install, included once from the cvmfs::one defined type.
* [`cvmfs::server`](#cvmfsserver): == Class cvmfs::server This class will set up a cvmfs server lint:ignore:parameter_documentation === Parameters [*repo*] This is the namevar 
* [`cvmfs::server::config`](#cvmfsserverconfig): class: cvmfs::server:config
* [`cvmfs::server::install`](#cvmfsserverinstall): Class - cvmfs::server::install
* [`cvmfs::server::yum`](#cvmfsserveryum): Class cvmfs::server::yum
* [`cvmfs::zero::config`](#cvmfszeroconfig): Class cvmfs::zero::config included from instances of cvmfs::zero defined type.
* [`cvmfs::zero::install`](#cvmfszeroinstall): Class: cvmfs::zero::install , desingned to be included from instances of cvmfs::zero
* [`cvmfs::zero::service`](#cvmfszeroservice): Class: cvmfs::zero::install , desingned to be included from instances of cvmfs::zero
* [`cvmfs::zero::yum`](#cvmfszeroyum): Class cvmfs::server::yum

#### Private Classes

* `cvmfs::config`: Central configuration of CvmFS
* `cvmfs::install`: Install cvmfs from a yum repository.
* `cvmfs::service`: Manages the cvmfs services. Opionally this also manages the autofs services
* `cvmfs::yum`: Configure cvmfs yum repositories

### Defined types

* [`cvmfs::domain`](#cvmfsdomain): Configure a a domain of cvmfs repositories
* [`cvmfs::id_map`](#cvmfsid_map): Create a map file uid or gid mappings
* [`cvmfs::mount`](#cvmfsmount): Mount one cvmfs repository. Most parameters map as lower case
versions of the raw cvmfs parameters.
* [`cvmfs::one`](#cvmfsone): == Define: cvmfs::one Sets up a stratum one service for CVMFS.  === Parameters [*repo*]  The name of the repostory, if the repo is not set th
* [`cvmfs::zero`](#cvmfszero): See README.md

## Classes

### <a name="cvmfs"></a>`cvmfs`

Installs and Configures CvmFS

* **See also**
  * https://cvmfs.readthedocs.io/en/stable/apx-parameters.html
    * CVMFS configuration parameters

#### Examples

##### Simple Example For one Mount

```puppet
class{"cvmfs":
  cvmfs_http_proxy  => 'http://ca-proxy.example.org:3128',
  cvmfs_quota_limit => 100
}
cvmfs::mount{'files.example.org:
  cvmfs_server_url  => 'http://web.example.org/cvmfs/files.example.org',
}
```

##### Mount a Domain

```puppet
class{"cvmfs":
  cvmfs_http_proxy  => 'http://ca-proxy.example.org:3128',
  cvmfs_quota_limit => 100,
}
cvmfs::domain{'example.net'
  cvmfs_server_url   => 'http://web.example.org/cvmfs/@fqrn@'
}
```

##### Use Mount rather than AutoFS

```puppet
class{'::cvmfs':
  mount_method => 'mount',
}
```

#### Parameters

The following parameters are available in the `cvmfs` class:

* [`mount_method`](#mount_method)
* [`manage_autofs_service`](#manage_autofs_service)
* [`cvmfs_quota_limit`](#cvmfs_quota_limit)
* [`cvmfs_quota_ratio`](#cvmfs_quota_ratio)
* [`cvmfs_http_proxy`](#cvmfs_http_proxy)
* [`cvmfs_cache_base`](#cvmfs_cache_base)
* [`cvmfs_dns_min_ttl`](#cvmfs_dns_min_ttl)
* [`cvmfs_dns_max_ttl`](#cvmfs_dns_max_ttl)
* [`cvmfs_claim_ownership`](#cvmfs_claim_ownership)
* [`cvmfs_uid_map`](#cvmfs_uid_map)
* [`cvmfs_gid_map`](#cvmfs_gid_map)
* [`cvmfs_memcache_size`](#cvmfs_memcache_size)
* [`cvmfs_mount_rw`](#cvmfs_mount_rw)
* [`cvmfs_follow_redirects`](#cvmfs_follow_redirects)
* [`cvmfs_timeout`](#cvmfs_timeout)
* [`cvmfs_timeout_direct`](#cvmfs_timeout_direct)
* [`cvmfs_nfiles`](#cvmfs_nfiles)
* [`cvmfs_syslog_level`](#cvmfs_syslog_level)
* [`cvmfs_tracefile`](#cvmfs_tracefile)
* [`cvmfs_debuglog`](#cvmfs_debuglog)
* [`cvmfs_max_ttl`](#cvmfs_max_ttl)
* [`cvmfs_version`](#cvmfs_version)
* [`cvmfs_yum`](#cvmfs_yum)
* [`cvmfs_yum_priority`](#cvmfs_yum_priority)
* [`cvmfs_yum_proxy`](#cvmfs_yum_proxy)
* [`cvmfs_yum_config`](#cvmfs_yum_config)
* [`cvmfs_yum_config_enabled`](#cvmfs_yum_config_enabled)
* [`cvmfs_yum_testing`](#cvmfs_yum_testing)
* [`cvmfs_yum_testing_enabled`](#cvmfs_yum_testing_enabled)
* [`cvmfs_yum_gpgcheck`](#cvmfs_yum_gpgcheck)
* [`cvmfs_yum_gpgkey`](#cvmfs_yum_gpgkey)
* [`cvmfs_yum_manage_repo`](#cvmfs_yum_manage_repo)
* [`cvmfs_use_geoapi`](#cvmfs_use_geoapi)
* [`cvmfs_repositories`](#cvmfs_repositories)
* [`cvmfs_hash`](#cvmfs_hash)
* [`cvmfs_env_variables`](#cvmfs_env_variables)
* [`default_cvmfs_partsize`](#default_cvmfs_partsize)
* [`cvmfs_domain_hash`](#cvmfs_domain_hash)
* [`cvmfs_yum_includepkgs`](#cvmfs_yum_includepkgs)
* [`cvmfs_instrument_fuse`](#cvmfs_instrument_fuse)
* [`cvmfs_repo_list`](#cvmfs_repo_list)
* [`cvmfs_alien_cache`](#cvmfs_alien_cache)
* [`cvmfs_shared_cache`](#cvmfs_shared_cache)

##### <a name="mount_method"></a>`mount_method`

Data type: `Enum['autofs','mount','none']`

The `autofs` will configure cvmfs to be mounted with autofs. The `mount` option will
use puppets mount type, currently adding a line to /etc/fstab. The *none* option
skips all mounting.  Note that migrating between for instance *autofs* and then *mount* is not supported.

Default value: `'autofs'`

##### <a name="manage_autofs_service"></a>`manage_autofs_service`

Data type: `Boolean`

should the autofs service be maintained.

Default value: ``true``

##### <a name="cvmfs_quota_limit"></a>`cvmfs_quota_limit`

Data type: `Variant[Enum['auto'],Integer]`

The cvmfs quota size in megabytes.

Default value: `1000`

##### <a name="cvmfs_quota_ratio"></a>`cvmfs_quota_ratio`

Data type: `Float`

If set to ration, e.g '0.8' then 0.8 of the partition size
the cvmfs cache is on will be used. Setting this assumes you have
allocated a partition to cvmfs cache.

Default value: `0.85`

##### <a name="cvmfs_http_proxy"></a>`cvmfs_http_proxy`

Data type: `Variant[Undef,String]`

List of squid servers

##### <a name="cvmfs_cache_base"></a>`cvmfs_cache_base`

Data type: `Stdlib::Absolutepath`

Location of the CVMFS cache base

Default value: `'/var/lib/cvmfs'`

##### <a name="cvmfs_dns_min_ttl"></a>`cvmfs_dns_min_ttl`

Data type: `Optional[Integer]`

Minimum ttl of DNS lookups.

Default value: ``undef``

##### <a name="cvmfs_dns_max_ttl"></a>`cvmfs_dns_max_ttl`

Data type: `Optional[Integer]`

Maximum ttl of DNS lookups.

Default value: ``undef``

##### <a name="cvmfs_claim_ownership"></a>`cvmfs_claim_ownership`

Data type: `Optional[Enum['yes','no']]`

Whether the client claims ownership of files or not.

Default value: ``undef``

##### <a name="cvmfs_uid_map"></a>`cvmfs_uid_map`

Data type: `Optional[Hash[Variant[Integer,String], Integer, 1]]`

Hash of UID pairs to map UIDs from catalogue to on the client.

Default value: ``undef``

##### <a name="cvmfs_gid_map"></a>`cvmfs_gid_map`

Data type: `Optional[Hash[Variant[Integer,String], Integer, 1]]`

Hash of GID pairs to map GIDs from catalogue to on the client.

Default value: ``undef``

##### <a name="cvmfs_memcache_size"></a>`cvmfs_memcache_size`

Data type: `Optional[Integer]`

Size of the CernVM-FS meta-data memory cache in Megabyte.

Default value: ``undef``

##### <a name="cvmfs_mount_rw"></a>`cvmfs_mount_rw`

Data type: `Optional[Enum['yes','no']]`

Mount option to mount read-only or read/write.

Default value: ``undef``

##### <a name="cvmfs_follow_redirects"></a>`cvmfs_follow_redirects`

Data type: `Optional[Enum['yes','no']]`

Sets CVMFS_FOLLOW_REDIRECTS to its value

Default value: ``undef``

##### <a name="cvmfs_timeout"></a>`cvmfs_timeout`

Data type: `Optional[Integer]`

cvmfs timeout setting.

Default value: ``undef``

##### <a name="cvmfs_timeout_direct"></a>`cvmfs_timeout_direct`

Data type: `Optional[Integer]`

cvmfs timeout to direct connections, see params.pp for default.

Default value: ``undef``

##### <a name="cvmfs_nfiles"></a>`cvmfs_nfiles`

Data type: `Optional[Integer]`

Number of open files, system setting, see params.pp for default.

Default value: ``undef``

##### <a name="cvmfs_syslog_level"></a>`cvmfs_syslog_level`

Data type: `Optional[Integer[1,2]]`

Default is in params.pp

Default value: ``undef``

##### <a name="cvmfs_tracefile"></a>`cvmfs_tracefile`

Data type: `Optional[Stdlib::Absolutepath]`

Create a tracefile at this location.

Default value: ``undef``

##### <a name="cvmfs_debuglog"></a>`cvmfs_debuglog`

Data type: `Optional[Stdlib::Absolutepath]`

Create a debug log file at this location.

Default value: ``undef``

##### <a name="cvmfs_max_ttl"></a>`cvmfs_max_ttl`

Data type: `Optional[Integer]`

Max ttl, see params.pp for default.

Default value: ``undef``

##### <a name="cvmfs_version"></a>`cvmfs_version`

Data type: `String[1]`

Version of cvmfs to install , default is present.

Default value: `'present'`

##### <a name="cvmfs_yum"></a>`cvmfs_yum`

Data type: `Stdlib::Httpurl`

Yum repository URL for cvmfs.

Default value: `"http://cern.ch/cvmrepo/yum/cvmfs/EL/${facts['os']['release']['major']}/${facts['os']['architecture']}"`

##### <a name="cvmfs_yum_priority"></a>`cvmfs_yum_priority`

Data type: `Integer`

Yum priority of repositories, defaults to 80.

Default value: `80`

##### <a name="cvmfs_yum_proxy"></a>`cvmfs_yum_proxy`

Data type: `Optional[Stdlib::Httpurl]`

http proxy for cvmfs yum package repository

Default value: ``undef``

##### <a name="cvmfs_yum_config"></a>`cvmfs_yum_config`

Data type: `Stdlib::Httpurl`

Yum repository URL for cvmfs site configs.

Default value: `"http://cern.ch/cvmrepo/yum/cvmfs-config/EL/${facts['os']['release']['major']}/${facts['os']['architecture']}"`

##### <a name="cvmfs_yum_config_enabled"></a>`cvmfs_yum_config_enabled`

Data type: `Integer[0,1]`

Defaults to false, set to true to enable.

Default value: `0`

##### <a name="cvmfs_yum_testing"></a>`cvmfs_yum_testing`

Data type: `Stdlib::Httpurl`

Yum repository URL for cmvfs testing repository.

Default value: `"http://cern.ch/cvmrepo/yum/cvmfs-testing/EL/${facts['os']['release']['major']}/${facts['os']['architecture']}"`

##### <a name="cvmfs_yum_testing_enabled"></a>`cvmfs_yum_testing_enabled`

Data type: `Integer[0,1]`

Defaults to false, should the testing repository be enabled.

Default value: `0`

##### <a name="cvmfs_yum_gpgcheck"></a>`cvmfs_yum_gpgcheck`

Data type: `Integer[0,1]`

Defaults to true, set to false to disable GPG checking (Do Not Do This)

Default value: `1`

##### <a name="cvmfs_yum_gpgkey"></a>`cvmfs_yum_gpgkey`

Data type: `Variant[Stdlib::Filesource,Stdlib::Httpurl]`

Set a custom GPG key for yum repos, you must deploy it yourself.

Default value: `'file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CernVM'`

##### <a name="cvmfs_yum_manage_repo"></a>`cvmfs_yum_manage_repo`

Data type: `Boolean`

Set to false to disable yum repositories management.

Default value: ``true``

##### <a name="cvmfs_use_geoapi"></a>`cvmfs_use_geoapi`

Data type: `Optional[Enum['yes','no']]`

Enable geoapi to find suitable proxies.

Default value: ``undef``

##### <a name="cvmfs_repositories"></a>`cvmfs_repositories`

Data type: `Optional[String[1]]`

By default undef and `CVMFS_REPOSITORIES` in `default.local` will be populated
automatically from what is explicitly mounted with `cvmfs::mount`. If this is
specified then`CVMFS_REPOSITORIES` list in `default.local` will be exactly managed with this variable.
e.g `cvmfs-config.cern.ch,atlas.cern.ch`

Default value: ``undef``

##### <a name="cvmfs_hash"></a>`cvmfs_hash`

Data type: `Hash`

Rather than using cvmfs::mount defined type a hash of mounts can be sepecfied.
`cvmfs_hash {'myrepo' => {'cvmfs_server_url' => 'http://web.example.org/cvmfs/ams.example.org/}`

Default value: `{}`

##### <a name="cvmfs_env_variables"></a>`cvmfs_env_variables`

Data type: `Hash`

`$cvmfs_env_variables = {'CMS_LOCAL_SITE' => '<path to siteconf>'`
 will produce `export CMS_LOCAL_SITE=<path to siteconf>`in the default.local file.

Default value: `{}`

##### <a name="default_cvmfs_partsize"></a>`default_cvmfs_partsize`

Data type: `Integer`



Default value: `10000`

##### <a name="cvmfs_domain_hash"></a>`cvmfs_domain_hash`

Data type: `Hash`

Specify of a hash `cvmfs::domain` types.

Default value: `{}`

##### <a name="cvmfs_yum_includepkgs"></a>`cvmfs_yum_includepkgs`

Data type: `Variant[Enum['absent'], Array[String]]`

Specify an includepkgs to the yum repos to ignore other packages.

Default value: `['cvmfs','cvmfs-keys','cvmfs-server','cvmfs-config-default']`

##### <a name="cvmfs_instrument_fuse"></a>`cvmfs_instrument_fuse`

Data type: `Boolean`

Instrument Fuse

Default value: ``false``

##### <a name="cvmfs_repo_list"></a>`cvmfs_repo_list`

Data type: `Boolean`

Specify exactly the REPO_LIST in `defaults.local` overriding auto population.

Default value: ``true``

##### <a name="cvmfs_alien_cache"></a>`cvmfs_alien_cache`

Data type: `Optional[String]`

Use an alien cache

Default value: ``undef``

##### <a name="cvmfs_shared_cache"></a>`cvmfs_shared_cache`

Data type: `Optional[Enum['yes','no']]`

Enable a shared cache

Default value: ``undef``

### <a name="cvmfsfsck"></a>`cvmfs::fsck`

#

#### Parameters

The following parameters are available in the `cvmfs::fsck` class:

* [`cvmfs_cache_base`](#cvmfs_cache_base)
* [`options`](#options)
* [`onreboot`](#onreboot)
* [`usesystemd`](#usesystemd)

##### <a name="cvmfs_cache_base"></a>`cvmfs_cache_base`

Data type: `Any`

Root of cvmfs ache

Default value: `$cvmfs::cvmfs_cache_base`

##### <a name="options"></a>`options`

Data type: `Any`

Any extra options

Default value: `''`

##### <a name="onreboot"></a>`onreboot`

Data type: `Any`

Should fsck be run after every reboot

Default value: ``false``

##### <a name="usesystemd"></a>`usesystemd`

Data type: `Optional[Boolean]`

Use a systemd timer

Default value: ``undef``

### <a name="cvmfsoneconfig"></a>`cvmfs::one::config`

Class: cvmfs::one::config
Included once from the cvmfs::one defined type.

#### Parameters

The following parameters are available in the `cvmfs::one::config` class:

* [`cvmfs_sync_minute`](#cvmfs_sync_minute)

##### <a name="cvmfs_sync_minute"></a>`cvmfs_sync_minute`

Data type: `Any`



Default value: `'*/15'`

### <a name="cvmfsoneinstall"></a>`cvmfs::one::install`

Class: cvmfs::one::install,
included once from the cvmfs::one defined type.

#### Parameters

The following parameters are available in the `cvmfs::one::install` class:

* [`cvmfs_version`](#cvmfs_version)

##### <a name="cvmfs_version"></a>`cvmfs_version`

Data type: `String`



Default value: `'present'`

### <a name="cvmfsserver"></a>`cvmfs::server`

== Class cvmfs::server
This class will set up a cvmfs server
lint:ignore:parameter_documentation
=== Parameters
[*repo*]
This is the namevar , it should be set to the name of repository, e.g mysoftware.example.org, if
not set the namevar will be used.
[*nfshost*]
[*nfsshare*]
If *nfshost* and *nfsshare* are set then an nfsvolume will be mounted early on before all the cvmfs
configuration is done.
[*nfsoptions*]
Nfs options can be set, there is a sensible default as below.
[*pubkey*]
The name of pubkey to be used. It is assume the pubkey is in the directory
'/etc/cvmfs/keys'

=== Examples
   class{'cvmfs::server':
     repo   => 'ilc.example.org',
     pubkey => 'key.example.org'
   }
or
   class{'cvmfs::server':
     repo       => 'bute.example.org',
     nfshost    => 'nfs-server.example.org',
     nfsshare   => '/volume/bute'
     nfsoptions => 'noatime',
     pubkey     => 'key.example.org'

#### Parameters

The following parameters are available in the `cvmfs::server` class:

* [`pubkey`](#pubkey)
* [`repo`](#repo)
* [`nfsshare`](#nfsshare)
* [`nfshost`](#nfshost)
* [`nfsopts`](#nfsopts)
* [`user`](#user)
* [`nofiles`](#nofiles)
* [`uid`](#uid)
* [`cvmfs_yum_kernel`](#cvmfs_yum_kernel)
* [`cvmfs_yum_kernel_enabled`](#cvmfs_yum_kernel_enabled)
* [`cvmfs_yum`](#cvmfs_yum)
* [`cvmfs_yum_testing`](#cvmfs_yum_testing)
* [`cvmfs_yum_testing_enabled`](#cvmfs_yum_testing_enabled)

##### <a name="pubkey"></a>`pubkey`

Data type: `Any`



##### <a name="repo"></a>`repo`

Data type: `Any`



Default value: `$name`

##### <a name="nfsshare"></a>`nfsshare`

Data type: `Any`



Default value: ``undef``

##### <a name="nfshost"></a>`nfshost`

Data type: `Any`



Default value: ``undef``

##### <a name="nfsopts"></a>`nfsopts`

Data type: `Any`



Default value: `'rw,noatime,hard,nfsvers=3'`

##### <a name="user"></a>`user`

Data type: `Any`



Default value: `'shared'`

##### <a name="nofiles"></a>`nofiles`

Data type: `Any`



Default value: `65000`

##### <a name="uid"></a>`uid`

Data type: `Any`



Default value: `101`

##### <a name="cvmfs_yum_kernel"></a>`cvmfs_yum_kernel`

Data type: `Any`



Default value: `"http://cern.ch/cvmrepo/yum/cvmfs-kernel/EL/${facts['os']['release']['major']}/${facts['os']['architecture']}"`

##### <a name="cvmfs_yum_kernel_enabled"></a>`cvmfs_yum_kernel_enabled`

Data type: `Integer[0,1]`



Default value: `0`

##### <a name="cvmfs_yum"></a>`cvmfs_yum`

Data type: `Any`



Default value: `"http://cern.ch/cvmrepo/yum/cvmfs/EL/${facts['os']['release']['major']}/${facts['os']['architecture']}"`

##### <a name="cvmfs_yum_testing"></a>`cvmfs_yum_testing`

Data type: `Any`



Default value: `"http://cern.ch/cvmrepo/yum/cvmfs-testing/EL/${facts['os']['release']['major']}/${facts['os']['architecture']}"`

##### <a name="cvmfs_yum_testing_enabled"></a>`cvmfs_yum_testing_enabled`

Data type: `Integer[0,1]`



Default value: `0`

### <a name="cvmfsserverconfig"></a>`cvmfs::server::config`

class: cvmfs::server:config

#### Parameters

The following parameters are available in the `cvmfs::server::config` class:

* [`repo`](#repo)
* [`nfshost`](#nfshost)
* [`nfsshare`](#nfsshare)
* [`nfsopts`](#nfsopts)
* [`user`](#user)
* [`nofiles`](#nofiles)
* [`uid`](#uid)
* [`pubkey`](#pubkey)

##### <a name="repo"></a>`repo`

Data type: `Any`



Default value: ``undef``

##### <a name="nfshost"></a>`nfshost`

Data type: `Any`



Default value: ``undef``

##### <a name="nfsshare"></a>`nfsshare`

Data type: `Any`



Default value: ``undef``

##### <a name="nfsopts"></a>`nfsopts`

Data type: `Any`



Default value: `'rw,noatime,hard,nfsvers=3'`

##### <a name="user"></a>`user`

Data type: `Any`



Default value: `'shared'`

##### <a name="nofiles"></a>`nofiles`

Data type: `Any`



Default value: `65000`

##### <a name="uid"></a>`uid`

Data type: `Any`



Default value: `101`

##### <a name="pubkey"></a>`pubkey`

Data type: `Any`



Default value: `'cern-it1.cern.ch.pub'`

### <a name="cvmfsserverinstall"></a>`cvmfs::server::install`

Class - cvmfs::server::install

#### Parameters

The following parameters are available in the `cvmfs::server::install` class:

* [`cvmfs_version`](#cvmfs_version)
* [`cvmfs_kernel_version`](#cvmfs_kernel_version)
* [`cvmfs_aufs2_version`](#cvmfs_aufs2_version)

##### <a name="cvmfs_version"></a>`cvmfs_version`

Data type: `String`



Default value: `'present'`

##### <a name="cvmfs_kernel_version"></a>`cvmfs_kernel_version`

Data type: `String`



Default value: `'present'`

##### <a name="cvmfs_aufs2_version"></a>`cvmfs_aufs2_version`

Data type: `String`



Default value: `'present'`

### <a name="cvmfsserveryum"></a>`cvmfs::server::yum`

Class cvmfs::server::yum

#### Parameters

The following parameters are available in the `cvmfs::server::yum` class:

* [`cvmfs_yum_kernel`](#cvmfs_yum_kernel)
* [`cvmfs_yum_kernel_enabled`](#cvmfs_yum_kernel_enabled)
* [`cvmfs_yum_testing_enabled`](#cvmfs_yum_testing_enabled)
* [`cvmfs_yum`](#cvmfs_yum)
* [`cvmfs_yum_testing`](#cvmfs_yum_testing)

##### <a name="cvmfs_yum_kernel"></a>`cvmfs_yum_kernel`

Data type: `Stdlib::Httpurl`



Default value: `"http://cern.ch/cvmrepo/yum/cvmfs-kernel/EL/${facts['os']['release']['major']}/${facts['os']['architecture']}"`

##### <a name="cvmfs_yum_kernel_enabled"></a>`cvmfs_yum_kernel_enabled`

Data type: `Integer[0,1]`



Default value: `1`

##### <a name="cvmfs_yum_testing_enabled"></a>`cvmfs_yum_testing_enabled`

Data type: `Integer[0,1]`



Default value: `0`

##### <a name="cvmfs_yum"></a>`cvmfs_yum`

Data type: `Stdlib::Httpurl`



Default value: `"http://cern.ch/cvmrepo/yum/cvmfs/EL/${facts['os']['release']['major']}/${facts['os']['architecture']}"`

##### <a name="cvmfs_yum_testing"></a>`cvmfs_yum_testing`

Data type: `Stdlib::Httpurl`



Default value: `"http://cern.ch/cvmrepo/yum/cvmfs-testing/EL/${facts['os']['release']['major']}/${facts['os']['architecture']}"`

### <a name="cvmfszeroconfig"></a>`cvmfs::zero::config`

Class cvmfs::zero::config
included from instances of cvmfs::zero defined type.

### <a name="cvmfszeroinstall"></a>`cvmfs::zero::install`

Class: cvmfs::zero::install , desingned
to be included from instances of cvmfs::zero

#### Parameters

The following parameters are available in the `cvmfs::zero::install` class:

* [`cvmfs_version`](#cvmfs_version)
* [`cvmfs_kernel_version`](#cvmfs_kernel_version)
* [`cvmfs_aufs2_version`](#cvmfs_aufs2_version)

##### <a name="cvmfs_version"></a>`cvmfs_version`

Data type: `String`



Default value: `'present'`

##### <a name="cvmfs_kernel_version"></a>`cvmfs_kernel_version`

Data type: `String`



Default value: `'present'`

##### <a name="cvmfs_aufs2_version"></a>`cvmfs_aufs2_version`

Data type: `String`



Default value: `'present'`

### <a name="cvmfszeroservice"></a>`cvmfs::zero::service`

Class: cvmfs::zero::install , desingned
to be included from instances of cvmfs::zero

### <a name="cvmfszeroyum"></a>`cvmfs::zero::yum`

Class cvmfs::server::yum

#### Parameters

The following parameters are available in the `cvmfs::zero::yum` class:

* [`cvmfs_yum_kernel`](#cvmfs_yum_kernel)
* [`cvmfs_yum_kernel_enabled`](#cvmfs_yum_kernel_enabled)
* [`cvmfs_yum`](#cvmfs_yum)
* [`cvmfs_yum_testing`](#cvmfs_yum_testing)
* [`cvmfs_yum_testing_enabled`](#cvmfs_yum_testing_enabled)

##### <a name="cvmfs_yum_kernel"></a>`cvmfs_yum_kernel`

Data type: `Stdlib::Httpurl`



Default value: `"http://cern.ch/cvmrepo/yum/cvmfs-kernel/EL/${facts['os']['release']['major']}/${facts['os']['architecture']}"`

##### <a name="cvmfs_yum_kernel_enabled"></a>`cvmfs_yum_kernel_enabled`

Data type: `Integer[0,1]`



Default value: `1`

##### <a name="cvmfs_yum"></a>`cvmfs_yum`

Data type: `Stdlib::Httpurl`



Default value: `"http://cern.ch/cvmrepo/yum/cvmfs/EL/${facts['os']['release']['major']}/${facts['os']['architecture']}"`

##### <a name="cvmfs_yum_testing"></a>`cvmfs_yum_testing`

Data type: `Stdlib::Httpurl`



Default value: `"http://cern.ch/cvmrepo/yum/cvmfs-testing/EL/${facts['os']['release']['major']}/${facts['os']['architecture']}"`

##### <a name="cvmfs_yum_testing_enabled"></a>`cvmfs_yum_testing_enabled`

Data type: `Integer[0,1]`



Default value: `1`

## Defined types

### <a name="cvmfsdomain"></a>`cvmfs::domain`

Configure a a domain of cvmfs repositories

#### Examples

##### Add the example.org domain

```puppet
cvmfs::domain{'example.org':
  cvmfs_server_url = 'http://example.org/cvmfs/@fqrn@',
}
```

#### Parameters

The following parameters are available in the `cvmfs::domain` defined type:

* [`domain`](#domain)
* [`cvmfs_quota_limit`](#cvmfs_quota_limit)
* [`cvmfs_server_url`](#cvmfs_server_url)
* [`cvmfs_http_proxy`](#cvmfs_http_proxy)
* [`cvmfs_timeout`](#cvmfs_timeout)
* [`cvmfs_timeout_direct`](#cvmfs_timeout_direct)
* [`cvmfs_nfiles`](#cvmfs_nfiles)
* [`cvmfs_max_ttl`](#cvmfs_max_ttl)
* [`cvmfs_env_variables`](#cvmfs_env_variables)
* [`cvmfs_use_geoapi`](#cvmfs_use_geoapi)
* [`cvmfs_follow_redirects`](#cvmfs_follow_redirects)
* [`cvmfs_external_fallback_proxy`](#cvmfs_external_fallback_proxy)
* [`cvmfs_external_http_proxy`](#cvmfs_external_http_proxy)
* [`cvmfs_external_timeout`](#cvmfs_external_timeout)
* [`cvmfs_external_timeout_direct`](#cvmfs_external_timeout_direct)
* [`cvmfs_external_url`](#cvmfs_external_url)
* [`cvmfs_public_key`](#cvmfs_public_key)

##### <a name="domain"></a>`domain`

Data type: `Stdlib::Fqdn`

The domain of CvmFS repositories to mount

Default value: `$name`

##### <a name="cvmfs_quota_limit"></a>`cvmfs_quota_limit`

Data type: `Optional[Integer]`

Per mount quota limit, not relavent to shared cache. Sets cvmfs_quota_limit

Default value: ``undef``

##### <a name="cvmfs_server_url"></a>`cvmfs_server_url`

Data type: `Optional[String[1]]`

Stratum 1 list, typically `;` delimited. Sets CVMFS_SERVER_URL parameter.

Default value: ``undef``

##### <a name="cvmfs_http_proxy"></a>`cvmfs_http_proxy`

Data type: `Optional[String[1]]`

List of http proxies to use. Sets CVMFS_PROXY_LIST parameter.

Default value: ``undef``

##### <a name="cvmfs_timeout"></a>`cvmfs_timeout`

Data type: `Optional[Integer]`

Sets CVMFS_HTTP_TIMEOUT parameter

Default value: ``undef``

##### <a name="cvmfs_timeout_direct"></a>`cvmfs_timeout_direct`

Data type: `Optional[Integer]`

Sets CVMFS_HTTP_TIMEOUT_DIRECT

Default value: ``undef``

##### <a name="cvmfs_nfiles"></a>`cvmfs_nfiles`

Data type: `Optional[Integer]`

Number of open files permitted on the OS. Sets CVMFS_NFILES

Default value: ``undef``

##### <a name="cvmfs_max_ttl"></a>`cvmfs_max_ttl`

Data type: `Optional[Integer]`

Maximum effective TTL in seconds for DNS queries of proxy server names. Sets CVMFS_MAX_TTL

Default value: ``undef``

##### <a name="cvmfs_env_variables"></a>`cvmfs_env_variables`

Data type: `Optional[Hash]`

Sets per repo environments variables for magic links.

Default value: ``undef``

##### <a name="cvmfs_use_geoapi"></a>`cvmfs_use_geoapi`

Data type: `Optional[Stdlib::Yes_no]`

Set CVMFS_MAX_GEOAPI

Default value: ``undef``

##### <a name="cvmfs_follow_redirects"></a>`cvmfs_follow_redirects`

Data type: `Optional[Stdlib::Yes_no]`

Sets CVMFS_FOLLOW_REDIRECTS.

Default value: ``undef``

##### <a name="cvmfs_external_fallback_proxy"></a>`cvmfs_external_fallback_proxy`

Data type: `Optional[String]`

Sets CVMFS_EXTERNAL_FALLBACK_PROXY

Default value: ``undef``

##### <a name="cvmfs_external_http_proxy"></a>`cvmfs_external_http_proxy`

Data type: `Optional[String]`

Sets CVMFS_EXTERNAL_HTTP_PROXY

Default value: ``undef``

##### <a name="cvmfs_external_timeout"></a>`cvmfs_external_timeout`

Data type: `Optional[Integer]`

Sets CVMFS_EXTERNAL_TIMEOUT

Default value: ``undef``

##### <a name="cvmfs_external_timeout_direct"></a>`cvmfs_external_timeout_direct`

Data type: `Optional[Integer]`

Sets CVMFS_EXTERNAL_TIMEOUT_DIRECT

Default value: ``undef``

##### <a name="cvmfs_external_url"></a>`cvmfs_external_url`

Data type: `Optional[String]`

Sets CVMFS_EXTERNAL_URL

Default value: ``undef``

##### <a name="cvmfs_public_key"></a>`cvmfs_public_key`

Data type: `Optional[String[1]]`

Specify repository signing key

Default value: ``undef``

### <a name="cvmfsid_map"></a>`cvmfs::id_map`

Create a map file uid or gid mappings

#### Parameters

The following parameters are available in the `cvmfs::id_map` defined type:

* [`map`](#map)
* [`location`](#location)

##### <a name="map"></a>`map`

Data type: `Hash[Variant[Integer,String], Integer, 1]`

Hash of `{from => to}` pairs

##### <a name="location"></a>`location`

Data type: `Stdlib::Absolutepath`

Path to write map to.

Default value: `$title`

### <a name="cvmfsmount"></a>`cvmfs::mount`

Mount one cvmfs repository. Most parameters map as lower case
versions of the raw cvmfs parameters.

* **See also**
  * https://cvmfs.readthedocs.io/en/stable/apx-parameters.html
    * CVMFS configuration parameters

#### Examples

##### Trivial Mount

```puppet
cvmfs::mount{'files.example.org:
  cvmfs_server_url => 'http://web.exampple.org/cvmfs/files.example.org',
}
```

##### Mount with Environment Variables.

```puppet
cvmfs::mount{'foobar.example.org':
  cvmfs_env_variables => {
    'FOOT' => 'ball',
    'GOLF' => 'club',
  }
}
```

#### Parameters

The following parameters are available in the `cvmfs::mount` defined type:

* [`repo`](#repo)
* [`cvmfs_quota_limit`](#cvmfs_quota_limit)
* [`cvmfs_server_url`](#cvmfs_server_url)
* [`cvmfs_http_proxy`](#cvmfs_http_proxy)
* [`cvmfs_timeout`](#cvmfs_timeout)
* [`cvmfs_timeout_direct`](#cvmfs_timeout_direct)
* [`cvmfs_nfiles`](#cvmfs_nfiles)
* [`cvmfs_public_key`](#cvmfs_public_key)
* [`cvmfs_max_ttl`](#cvmfs_max_ttl)
* [`cvmfs_env_variables`](#cvmfs_env_variables)
* [`cvmfs_use_geoapi`](#cvmfs_use_geoapi)
* [`mount_method`](#mount_method)
* [`cvmfs_repo_list`](#cvmfs_repo_list)
* [`cvmfs_mount_rw`](#cvmfs_mount_rw)
* [`cvmfs_memcache_size`](#cvmfs_memcache_size)
* [`cvmfs_claim_ownership`](#cvmfs_claim_ownership)
* [`cvmfs_uid_map`](#cvmfs_uid_map)
* [`cvmfs_gid_map`](#cvmfs_gid_map)
* [`cvmfs_follow_redirects`](#cvmfs_follow_redirects)
* [`cvmfs_external_fallback_proxy`](#cvmfs_external_fallback_proxy)
* [`cvmfs_external_http_proxy`](#cvmfs_external_http_proxy)
* [`cvmfs_external_timeout`](#cvmfs_external_timeout)
* [`cvmfs_external_timeout_direct`](#cvmfs_external_timeout_direct)
* [`cvmfs_external_url`](#cvmfs_external_url)
* [`cvmfs_repository_tag`](#cvmfs_repository_tag)
* [`mount_options`](#mount_options)

##### <a name="repo"></a>`repo`

Data type: `Stdlib::Fqdn`

The fully qualified repository name to mount

Default value: `$name`

##### <a name="cvmfs_quota_limit"></a>`cvmfs_quota_limit`

Data type: `Optional[Integer]`

Per mount quota limit, not relavent to shared cache. Sets cvmfs_quota_limit

Default value: ``undef``

##### <a name="cvmfs_server_url"></a>`cvmfs_server_url`

Data type: `Optional[String[1]]`

Stratum 1 list, typically `;` delimited. Sets CVMFS_SERVER_URL parameter.

Default value: ``undef``

##### <a name="cvmfs_http_proxy"></a>`cvmfs_http_proxy`

Data type: `Optional[String[1]]`

List of http proxies to use. Sets CVMFS_PROXY_LIST parameter.

Default value: ``undef``

##### <a name="cvmfs_timeout"></a>`cvmfs_timeout`

Data type: `Optional[Integer]`

Sets CVMFS_HTTP_TIMEOUT parameter

Default value: ``undef``

##### <a name="cvmfs_timeout_direct"></a>`cvmfs_timeout_direct`

Data type: `Optional[Integer]`

Sets CVMFS_HTTP_TIMEOUT_DIRECT

Default value: ``undef``

##### <a name="cvmfs_nfiles"></a>`cvmfs_nfiles`

Data type: `Optional[Integer]`

Number of open files permitted on the OS. Sets CVMFS_NFILES

Default value: ``undef``

##### <a name="cvmfs_public_key"></a>`cvmfs_public_key`

Data type: `Optional[String[1]]`

Public key of repository, sets CVMFS_PUBLIC_KEYS

Default value: ``undef``

##### <a name="cvmfs_max_ttl"></a>`cvmfs_max_ttl`

Data type: `Optional[Integer]`

Maximum effective TTL in seconds for DNS queries of proxy server names. Sets CVMFS_MAX_TTL

Default value: ``undef``

##### <a name="cvmfs_env_variables"></a>`cvmfs_env_variables`

Data type: `Optional[Hash]`

Sets per repo environments variables for magic links.

Default value: ``undef``

##### <a name="cvmfs_use_geoapi"></a>`cvmfs_use_geoapi`

Data type: `Optional[Stdlib::Yes_no]`

Set CVMFS_MAX_GEOAPI

Default value: ``undef``

##### <a name="mount_method"></a>`mount_method`

Data type: `Enum['autofs','mount','none']`

Should the mount attempt be made with autofs or tranditional fstab mount. Do no use this.

Default value: `$cvmfs::mount_method`

##### <a name="cvmfs_repo_list"></a>`cvmfs_repo_list`

Data type: `Boolean`

If true the repository will added to the list of repositories maintained in `/etc/cvmfs/default.local`

Default value: ``true``

##### <a name="cvmfs_mount_rw"></a>`cvmfs_mount_rw`

Data type: `Optional[Stdlib::Yes_no]`

sets CVMFS_MOUNT_RW

Default value: ``undef``

##### <a name="cvmfs_memcache_size"></a>`cvmfs_memcache_size`

Data type: `Optional[Integer]`

Sets CVMFS_MEMCACHE_SIZE in Megabytes.

Default value: ``undef``

##### <a name="cvmfs_claim_ownership"></a>`cvmfs_claim_ownership`

Data type: `Optional[Stdlib::Yes_no]`

Sets CVMFS_CLAIM_OWNERSHIP.

Default value: ``undef``

##### <a name="cvmfs_uid_map"></a>`cvmfs_uid_map`

Data type: `Optional[Hash[Variant[Integer,String],Integer, 1]]`

Specify a UID map file path for this repository . Sets CVMFS_UID_MAP

Default value: ``undef``

##### <a name="cvmfs_gid_map"></a>`cvmfs_gid_map`

Data type: `Optional[Hash[Variant[Integer,String],Integer, 1]]`

Specify a GID map file path for this repository . Sets CVMFS_GID_MAP

Default value: ``undef``

##### <a name="cvmfs_follow_redirects"></a>`cvmfs_follow_redirects`

Data type: `Optional[Stdlib::Yes_no]`

Sets CVMFS_FOLLOW_REDIRECTS.

Default value: ``undef``

##### <a name="cvmfs_external_fallback_proxy"></a>`cvmfs_external_fallback_proxy`

Data type: `Optional[String]`

Sets CVMFS_EXTERNAL_FALLBACK_PROXY

Default value: ``undef``

##### <a name="cvmfs_external_http_proxy"></a>`cvmfs_external_http_proxy`

Data type: `Optional[String]`

Sets CVMFS_EXTERNAL_HTTP_PROXY

Default value: ``undef``

##### <a name="cvmfs_external_timeout"></a>`cvmfs_external_timeout`

Data type: `Optional[Integer]`

Sets CVMFS_EXTERNAL_TIMEOUT

Default value: ``undef``

##### <a name="cvmfs_external_timeout_direct"></a>`cvmfs_external_timeout_direct`

Data type: `Optional[Integer]`

Sets CVMFS_EXTERNAL_TIMEOUT_DIRECT

Default value: ``undef``

##### <a name="cvmfs_external_url"></a>`cvmfs_external_url`

Data type: `Optional[String]`

Sets CVMFS_EXTERNAL_URL

Default value: ``undef``

##### <a name="cvmfs_repository_tag"></a>`cvmfs_repository_tag`

Data type: `Optional[String[1]]`

Sets CVMFS_REPOSITORY_TAG

Default value: ``undef``

##### <a name="mount_options"></a>`mount_options`

Data type: `String[1]`

Mount options to use for fstab style mounting.

Default value: `'defaults,_netdev,nodev'`

### <a name="cvmfsone"></a>`cvmfs::one`

== Define: cvmfs::one
Sets up a stratum one service for CVMFS.

=== Parameters
[*repo*]
 The name of the repostory, if the repo is not set the *namevar* will be used.

[*origin*]
 The URL prefix of the stratum zero endpoint, the repo name will be appended to the end.

[*keys*]
 An array of keys to use for a repository. The default value is
 ['/etc/cvmfs/keys/cern.ch.pub','/etc/cvmfs/keys/cern-it1.cern.ch.pub','/etc/cvmfs/keys/cern-it2.cern.ch.pub']

=== Examples
  cvmfs::one{'mice.example.org':
    origin => 'http://cvmfs01.example.org/cvmfs',
    keys   => ['/etc/cvmfs/keys/example1.pub','/etc/cvmfs/keys/example1.pub']
  }
=== Copyright
Steve Traylen, <steve.traylen@cern.ch>, CERN 2013.

#### Parameters

The following parameters are available in the `cvmfs::one` defined type:

* [`repo`](#repo)
* [`origin`](#origin)
* [`keys`](#keys)
* [`mime_expire`](#mime_expire)

##### <a name="repo"></a>`repo`

Data type: `Any`



Default value: `$name`

##### <a name="origin"></a>`origin`

Data type: `Any`



Default value: `'http://stratum0.example.org/cvmfs'`

##### <a name="keys"></a>`keys`

Data type: `Any`



Default value: `['/etc/cvmfs/keys/cern.ch.pub','/etc/cvmfs/keys/cern-it1.cern.ch.pub','/etc/cvmfs/keys/cern-it2.cern.ch.pub']`

##### <a name="mime_expire"></a>`mime_expire`

Data type: `Any`



Default value: `61`

### <a name="cvmfszero"></a>`cvmfs::zero`

See README.md

#### Parameters

The following parameters are available in the `cvmfs::zero` defined type:

* [`user`](#user)
* [`uid`](#uid)
* [`group`](#group)
* [`gid`](#gid)
* [`repo`](#repo)
* [`clientuser`](#clientuser)
* [`nofiles`](#nofiles)
* [`repo_store`](#repo_store)
* [`spool_store`](#spool_store)
* [`home`](#home)
* [`claim_ownership`](#claim_ownership)
* [`auto_tag`](#auto_tag)
* [`garbage_collection`](#garbage_collection)
* [`auto_gc`](#auto_gc)
* [`auto_gc_timespan`](#auto_gc_timespan)
* [`ignore_xdir_hardlinks`](#ignore_xdir_hardlinks)
* [`creator_version`](#creator_version)
* [`mime_expire`](#mime_expire)

##### <a name="user"></a>`user`

Data type: `Any`



##### <a name="uid"></a>`uid`

Data type: `Any`



##### <a name="group"></a>`group`

Data type: `Any`



##### <a name="gid"></a>`gid`

Data type: `Any`



##### <a name="repo"></a>`repo`

Data type: `Any`



Default value: `$title`

##### <a name="clientuser"></a>`clientuser`

Data type: `Any`



Default value: `$user`

##### <a name="nofiles"></a>`nofiles`

Data type: `Any`



Default value: `65000`

##### <a name="repo_store"></a>`repo_store`

Data type: `Any`



Default value: `'/srv/cvmfs'`

##### <a name="spool_store"></a>`spool_store`

Data type: `Any`



Default value: `'/var/spool/cvmfs'`

##### <a name="home"></a>`home`

Data type: `Any`



Default value: `"/srv/cvmfs/${title}/${user}"`

##### <a name="claim_ownership"></a>`claim_ownership`

Data type: `Any`



Default value: ``false``

##### <a name="auto_tag"></a>`auto_tag`

Data type: `Any`



Default value: ``true``

##### <a name="garbage_collection"></a>`garbage_collection`

Data type: `Any`



Default value: ``false``

##### <a name="auto_gc"></a>`auto_gc`

Data type: `Any`



Default value: ``false``

##### <a name="auto_gc_timespan"></a>`auto_gc_timespan`

Data type: `Any`



Default value: `'3 days ago'`

##### <a name="ignore_xdir_hardlinks"></a>`ignore_xdir_hardlinks`

Data type: `Any`



Default value: ``false``

##### <a name="creator_version"></a>`creator_version`

Data type: `Any`



Default value: `'2.3.0-1'`

##### <a name="mime_expire"></a>`mime_expire`

Data type: `Any`



Default value: `120`

